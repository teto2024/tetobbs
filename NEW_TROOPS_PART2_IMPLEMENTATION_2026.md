# 新規兵種追加実装 Part 2 - 2026

## 概要
文明育成ゲームに6種類の新しい兵種を追加しました（海軍戦闘機、艦上レーザー兵器、対戦キャノン砲、投石兵、巡航ミサイル、防護兵）。各兵種は適切な時代にアンロックされ、固有のスキルと特性を持っています。

## 追加された新スキル（6種類）

### 1. 💣 爆弾投下 (bomb_drop)
- **効果タイプ**: 特殊（カテゴリ特効）
- **対象**: 敵
- **効果値**: 100%（2倍ダメージ）
- **持続ターン**: 1
- **発動確率**: 100%
- **説明**: 海カテゴリに与えるダメージを2倍にする
- **実装**: battle_engine.phpで実装済み（line 1039-1050）

### 2. 🔦 レーザー照射 (laser_irradiation)
- **効果タイプ**: 特殊（カテゴリ特効）
- **対象**: 敵
- **効果値**: 100%（2倍ダメージ）
- **持続ターン**: 1
- **発動確率**: 100%
- **説明**: 空カテゴリに与えるダメージを2倍にする
- **実装**: battle_engine.phpで実装済み（line 1052-1063）

### 3. 💥 散弾発射 (shrapnel_fire)
- **効果タイプ**: 特殊（カテゴリ特効）
- **対象**: 敵
- **効果値**: 100%（2倍ダメージ）
- **持続ターン**: 1
- **発動確率**: 100%
- **説明**: 陸カテゴリに与えるダメージを2倍にする
- **実装**: battle_engine.phpで実装済み（line 1065-1076）

### 4. 🪨 投石 (stone_throw)
- **効果タイプ**: 即時ダメージ（アーマー貫通）
- **対象**: 敵
- **効果値**: 100%
- **持続ターン**: 1
- **発動確率**: 15%
- **説明**: 15%の確率でアーマーを貫通してダメージを与える
- **実装**: battle_engine.phpで実装済み（line 1078-1086）

### 5. 🚀 自律飛行 (autonomous_flight)
- **効果タイプ**: 特殊（連続攻撃）
- **対象**: 自分
- **効果値**: 3（3回攻撃）
- **持続ターン**: 1
- **発動確率**: 10%
- **説明**: 10%の確率で1ターンに3回連続攻撃する
- **実装**: battle_engine.phpで実装済み（line 1088-1092）

### 6. ☢️ 核武装解除 (nuclear_disarm)
- **効果タイプ**: 即時ダメージ（核ユニット特効）
- **対象**: 敵
- **効果値**: 100%（2倍ダメージ）
- **持続ターン**: 1
- **発動確率**: 20%
- **説明**: 核カテゴリのユニットに対して大ダメージを与える
- **実装**: battle_engine.phpで実装済み（line 1094-1118）

## 追加された兵種（6種類）

### 現代時代（era_order = 7）- 3種類

#### 1. ✈️ 海軍戦闘機 (naval_fighter)
- **カテゴリ**: 攻城
- **ドメイン**: 空
- **攻撃力**: 190
- **防御力**: 65
- **体力**: 170
- **スキル**: 爆弾投下（海カテゴリに大ダメージ）
- **訓練コスト**: 21,000コイン
- **必要資源**: 鉄420、石油160、電子部品55
- **訓練時間**: 4,200秒
- **前提建物**: 空軍基地
- **前提研究**: 電気

#### 2. 🔦 艦上レーザー兵器 (ship_laser_weapon)
- **カテゴリ**: 攻城
- **ドメイン**: 海
- **攻撃力**: 185
- **防御力**: 100
- **体力**: 280
- **スキル**: レーザー照射（空カテゴリに大ダメージ）
- **訓練コスト**: 23,000コイン
- **必要資源**: 鉄450、鋼100、電子部品80
- **訓練時間**: 4,600秒
- **前提建物**: 造船所
- **前提研究**: 電気

#### 3. 🎯 対戦キャノン砲 (anti_tank_cannon)
- **カテゴリ**: 攻城
- **ドメイン**: 陸
- **攻撃力**: 175
- **防御力**: 70
- **体力**: 190
- **スキル**: 散弾発射（陸カテゴリに大ダメージ）
- **訓練コスト**: 19,000コイン
- **必要資源**: 鉄380、火薬100
- **訓練時間**: 3,800秒
- **前提建物**: 攻城工房
- **前提研究**: 電気

### ルネサンス時代（era_order = 5）- 1種類

#### 4. 🪨 投石兵 (slinger)
- **カテゴリ**: 攻城
- **ドメイン**: 陸
- **攻撃力**: 65
- **防御力**: 40
- **体力**: 100
- **スキル**: 投石（アーマー貫通ダメージ）
- **訓練コスト**: 3,000コイン
- **必要資源**: 石80、木40
- **訓練時間**: 900秒
- **前提建物**: 攻城工房
- **前提研究**: 航海術

### 原子力時代（era_order = 8）- 2種類

#### 5. 🚀 巡航ミサイル (cruise_missile)
- **カテゴリ**: 攻城
- **ドメイン**: 空
- **攻撃力**: 280
- **防御力**: 60
- **体力**: 120
- **スキル**: 自律飛行（3回連続攻撃）
- **特性**: 使い捨て（is_disposable = TRUE）
- **訓練コスト**: 80,000コイン
- **必要資源**: 鉄800、ウラン100、電子部品200
- **訓練時間**: 9,000秒
- **前提建物**: 空軍基地
- **前提研究**: 核分裂

#### 6. 🛡️ 防護兵 (protection_soldier)
- **カテゴリ**: 歩兵
- **ドメイン**: 陸
- **攻撃力**: 170
- **防御力**: 130
- **体力**: 350
- **スキル**: 核武装解除（核ユニットに大ダメージ）
- **訓練コスト**: 32,000コイン
- **必要資源**: 鉄650、ウラン40、電子部品100
- **訓練時間**: 6,400秒
- **前提建物**: 兵舎
- **前提研究**: 核分裂

## 前提条件の設定

### 研究前提条件
- **ルネサンス時代**: 航海術 (navigation)
- **現代時代**: 電気 (electricity)
- **原子力時代**: 核分裂 (nuclear_fission)

### 建物前提条件
- **空軍ユニット**: 空軍基地 (air_base)
- **海軍ユニット**: 造船所 (naval_dock)
- **攻城兵器**: 攻城工房 (siege_workshop)
- **歩兵**: 兵舎 (barracks)

## ドメインカテゴリ（領域）
- **陸** (land): 地上戦闘ユニット
- **海** (sea): 海上戦闘ユニット
- **空** (air): 航空戦闘ユニット

## 兵種カテゴリ
- **歩兵** (infantry): 基本的な地上兵力
- **攻城** (siege): 建物・城壁攻撃用ユニット

## 特殊な特性
- **使い捨てユニット**: 巡航ミサイルは使い捨て（is_disposable = TRUE）で、出撃後は自動で消滅
- **カテゴリ特効**: 爆弾投下・レーザー照射・散弾発射は特定のドメインカテゴリに2倍ダメージ
- **アーマー貫通**: 投石スキルは防御力を無視してダメージを与える
- **核ユニット特効**: 防護兵は核関連ユニット（nuclear_submarine、icbm、nuclear_bomberなど）に大ダメージ

## ファイル
- `add_new_troops_2026_part2.sql` - 新兵種とスキルを追加するSQLスクリプト
- `fix_troop_health_points_2026.sql` - 体力値を調整するSQLスクリプト

## 適用方法
```bash
# 新兵種追加
mysql -u root -p microblog < add_new_troops_2026_part2.sql

# 体力値調整
mysql -u root -p microblog < fix_troop_health_points_2026.sql
```

## バトルエンジン実装状況
すべてのスキルはbattle_engine.phpで実装済みです：
- ✅ bomb_drop（爆弾投下）- line 1039-1050
- ✅ laser_irradiation（レーザー照射）- line 1052-1063
- ✅ shrapnel_fire（散弾発射）- line 1065-1076
- ✅ stone_throw（投石）- line 1078-1086
- ✅ autonomous_flight（自律飛行）- line 1088-1092
- ✅ nuclear_disarm（核武装解除）- line 1094-1118

## 注意事項
- すべての兵種には適切な時代、カテゴリ、ドメインが設定されています
- 前提条件（研究・建物）は既存のシステムに基づいて設定されています
- スキルはバランスを考慮して設定されています
- INSERT IGNOREを使用しているため、既存のデータを上書きせず安全に適用できます
- 体力値は各兵種の特徴（攻撃力、防御力、役割）に応じて適切に設定されています

## 体力値調整について
ID 119-164の兵種の体力値を以下の方針で調整しました：
- **歩兵**: 攻撃力と防御力のバランスに応じて800-5000の範囲
- **騎兵**: 機動力を考慮してやや低めの800-2400の範囲
- **遠距離**: 攻撃特化のため低めの600-2800の範囲
- **攻城**: 役割に応じて170-4000の範囲
- **使い捨て**: 巡航ミサイルは120（使い捨てのため低体力）
- 環境キラーにならないよう、攻撃力・防御力とのバランスを重視
